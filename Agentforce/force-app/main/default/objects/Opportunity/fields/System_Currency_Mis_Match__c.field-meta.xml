<?xml version="1.0" encoding="UTF-8"?>
<CustomField xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>System_Currency_Mis_Match__c</fullName>
    <description>Null when currencies aligned, owner and/or account where not</description>
    <externalId>false</externalId>
    <formula>/* Using 1 if owner is mismatched and 2 if Account is mismatched we are able to get 3 options - 0,1,2,3 by adding the results and using Case to determine outcome 
Further checks can be made, but care must be taken to ensure combinations result in unique values */

CASE (
			(
							(
											IF ( Text(CurrencyIsoCode) !=  Owner.System_User_Currency__c, 1, 0)
							) 
							+ 
							(
											IF (Text(CurrencyIsoCode) !=  TEXT(Account.CurrencyIsoCode), 2, 0)
							)
			
			),
				
				0, NULL,
				1, &quot;Owner Currency Mis-Match&quot;,
				2, &quot;Account Currency Mis-Match&quot;,
				3, &quot;Owner and Account Currency Mis-Match&quot;,NULL
)</formula>
    <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
    <label>System: Currency Mis-Match</label>
    <required>false</required>
    <trackHistory>false</trackHistory>
    <trackTrending>false</trackTrending>
    <type>Text</type>
    <unique>false</unique>
</CustomField>
