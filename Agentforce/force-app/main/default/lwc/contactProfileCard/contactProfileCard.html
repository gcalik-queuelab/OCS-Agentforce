<template>
  <div class="slds-card slds-profile" style={backgroundColorStyle}>
    <div class="slds-grid slds-wrap font-color" style={textColorStyle}>
      <div style={iconForegroundColorStyle}>
        <template lwc:if={isLoaded}>
          <div class="slds-size_1-of-1">
            <div class="slds-grid slds-wrap slds-p-top_small slds-p-bottom_small slds-p-right_medium slds-p-left_medium">
              <div class="slds-grid slds-wrap stretch-width">
                <div class="slds-size_1-of-1">
                  <div class="slds-grid slds-wrap">
                    <div class="slds-size_1-of-1 slds-p-bottom_large">
                      <div class="slds-grid slds-wrap">
                        <div class="slds-align-middle slds-text-align_center">
                          <!-- <img class="profile-photo" src="https://res.cloudinary.com/btahub/image/upload/v1708357811/ntbg5p1mwixury672dxy.png" /> -->
                          <lightning-icon class="icon-style" icon-name="utility:contact" size="large"></lightning-icon>
                        </div>
                        <div class="slds-align-middle slds-p-left_medium">
                          <h1 class="font-color"><strong>{name}</strong></h1>  
                          <h2 class="font-color">{title}</h2>
                          <h2 class="font-color"><a class="font-color" href={accountLink}>{account}</a></h2>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-size_1-of-1 slds-p-bottom_large slds-border_bottom">
                    <div class="slds-grid slds-wrap">
                      <div class="slds-size_1-of-2 slds-p-bottom_x-small" if:true={email}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-1">
                            <span class="slds-form-element__label font-color">Email</span>
                            <div class="slds-form-element__control">
                              <div class="slds-form-element__static font-color">
                                <strong><a class="font-color" href={emaillink}>{email}</a></strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="slds-size_1-of-2 slds-p-bottom_x-small" if:true={accountCustomerType}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-1">
                            <span class="slds-form-element__label font-color">Customer Type</span>
                            <div class="slds-form-element__control">
                              <div class="slds-form-element__static font-color">
                                <strong>{accountCustomerType}</strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="slds-size_1-of-2 slds-p-bottom_x-small" if:true={phonemobileconcat}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-1">
                            <span class="slds-form-element__label font-color">Phone</span>
                            <div class="slds-form-element__control">
                              <div class="slds-form-element__static font-color">
                                <strong if:true={phone}><a class="font-color" href={phonelink}>{phone}</a><br if:true={mobile}></strong>
                                <strong><a class="font-color" href={mobilelink}>{mobile}</a></strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="slds-size_1-of-2 slds-p-bottom_x-small" if:true={lastActivityDate}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-1">
                            <span class="slds-form-element__label font-color">Last Activity</span>
                            <div class="slds-form-element__control">
                              <div class="slds-form-element__static font-color">
                                <strong>
                                  <lightning-formatted-date-time value={lastActivityDate}></lightning-formatted-date-time>
                                </strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="slds-size_1-of-2" if:true={ownerName}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-1">
                            <span class="slds-form-element__label font-color">Contact Owner</span>
                            <div class="slds-form-element__control">
                              <div class="slds-form-element__static font-color">
                                <strong><a class="font-color" href={ownerLink}>{ownerName}</a></strong>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>                
                  <div class="slds-size_1-of-1 slds-p-bottom_small slds-p-top_small">
                    <div class="slds-grid slds-wrap">
                      <div class="slds-size_1-of-1 slds-p-bottom_x-small"  if:true={latestPerception}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-12 slds-align-middle">
                            <lightning-icon class="icon-style" icon-name="utility:calculated_insights" size="x-small"></lightning-icon>
                          </div>
                          <div class="slds-size_11-of-12 slds-align-middle">
                            <div class="slds-grid slds-wrap">
                              <div class="slds-size_1-of-1">
                                <div class="slds-grid slds-wrap">
                                  <div class="slds-align-middle">
                                    <p class="font-color slds-p-left_x-small slds-p-right_small">Latest Perception</p>
                                  </div>
                                  <div class="slds-align-middle">
                                    <div class="slds-align-middle font-color">
                                      <strong>{latestPerception}</strong>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="slds-size_1-of-1 slds-p-bottom_x-small" if:true={openOpps}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-12 slds-align-middle">
                            <lightning-icon class="icon-style" icon-name="utility:cart" size="x-small"></lightning-icon>
                          </div>
                          <div class="slds-size_11-of-12 slds-align-middle">
                            <div class="slds-grid slds-wrap">
                              <div class="slds-size_1-of-1">
                                <div class="slds-grid slds-wrap">
                                  <div class="slds-align-middle">
                                    <p class="font-color slds-p-left_x-small slds-p-right_small"># Open Opportunities</p>
                                  </div>
                                  <div class="font-color value-align-top">
                                    <div>
                                      <strong>
                                        <lightning-formatted-number value={openOpps}></lightning-formatted-number>
                                      </strong>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="slds-size_1-of-1 slds-p-bottom_x-small" if:true={activeContracts}>
                        <div class="slds-grid slds-wrap">
                          <div class="slds-size_1-of-12 slds-align-middle">
                            <lightning-icon class="icon-style" icon-name="utility:contract_doc" size="x-small"></lightning-icon>
                          </div>
                          <div class="slds-size_11-of-12 slds-align-middle">
                            <div class="slds-grid slds-wrap">
                              <div class="slds-size_1-of-1">
                                <div class="slds-grid slds-wrap">
                                  <div class="slds-align-middle">
                                    <p class="font-color slds-p-left_x-small slds-p-right_small"># Active Contracts</p>
                                  </div>
                                  <div class="slds-align-middle">
                                    <div class="slds-align-middle font-color">
                                      <strong>{activeContracts}</strong>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </template>
        <template lwc:elseif={error}> Error: {error} </template>
      </div>
    </div>
  </div>
</template>