<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Send Conga Trigger Outbound Message to auto generate NPS PDF and email MD.</description>
        <name>Conga_Trigger_NPS</name>
        <label>Conga Trigger - NPS</label>
        <locationX>4249</locationX>
        <locationY>4751</locationY>
        <actionName>NPS__c.Conga_Trigger_NPS</actionName>
        <actionType>outboundMessage</actionType>
        <connector>
            <targetReference>Set_System_Conga_Merge_In_Progress_Field</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <nameSegment>NPS__c.Conga_Trigger_NPS</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Notify_NPS_Surveyor_Appointment_DateTime_Changed</name>
        <label>Notify NPS Surveyor - Appointment Date/Time Changed</label>
        <locationX>4976</locationX>
        <locationY>1763</locationY>
        <actionName>NPS__c.AD_360_notify_NPS_Surveyor_that_Due_Date_has_changed</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>NPS_Closed_Decision</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.AD_360_notify_NPS_Surveyor_that_Due_Date_has_changed</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Notify_Owner_Manager_NPS_Surveyor_Changed</name>
        <label>Notify Owner Manager NPS Surveyor Changed</label>
        <locationX>4371</locationX>
        <locationY>4283</locationY>
        <actionName>NPS__c.AD_362_notify_NPS_Owner_of_change_in_NPS_Surveyor_Manager</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>NPS_Survey_Completed_Decision</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.AD_362_notify_NPS_Owner_of_change_in_NPS_Surveyor_Manager</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Notify_Owner_NPS_Surveyor_Changed</name>
        <label>Notify Owner NPS Surveyor Changed</label>
        <locationX>4107</locationX>
        <locationY>4283</locationY>
        <actionName>NPS__c.AD_362_notify_NPS_Owner_of_change_in_NPS_Surveyor</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>NPS_Survey_Completed_Decision</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.AD_362_notify_NPS_Owner_of_change_in_NPS_Surveyor</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>NPS_Survey_is_Scheduled_Email</name>
        <label>NPS Survey is Scheduled Email</label>
        <locationX>4844</locationX>
        <locationY>1079</locationY>
        <actionName>NPS__c.AD_364_notify_NPS_Surveyor_when_an_NPS_Survey_has_been_scheduled</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Has_the_Appointment_DateTime_Changed</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.AD_364_notify_NPS_Surveyor_when_an_NPS_Survey_has_been_scheduled</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Cambodia</label>
        <locationX>1106</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Cambodia</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Cambodia</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Australia</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Australia</label>
        <locationX>842</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Australia</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Australia</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_India</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - India</label>
        <locationX>1370</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_India</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_India</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Indonesia</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Indonesia</label>
        <locationX>1634</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Indonesia</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Indonesia</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Malaysia</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Malaysia</label>
        <locationX>1898</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Malaysia</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Malaysia</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_New_Zealand</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - New Zealand</label>
        <locationX>2162</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_New_Zealand</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_New_Zealand</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Philippines</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Philippines</label>
        <locationX>2426</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Philippines</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Philippines</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Saudi_Arabia</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Saudi Arabia</label>
        <locationX>2690</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Saudi_Arabia</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Saudi_Arabia</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Singapore</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Singapore</label>
        <locationX>2954</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Singapore</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Singapore</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_Thailand</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - Thailand</label>
        <locationX>3218</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_Thailand</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_Thailand</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_APAC_ME_NPS_Marketing_Notification_United_Arab_Emirates</name>
        <label>Send APAC&amp;ME - NPS Marketing Notification - United Arab Emirates</label>
        <locationX>3482</locationX>
        <locationY>5507</locationY>
        <actionName>NPS__c.APAC_ME_NPS_Marketing_Notification_United_Arab_Emirates</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.APAC_ME_NPS_Marketing_Notification_United_Arab_Emirates</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <description>Sends email to Brand where threshold is met for Marketing purposes</description>
        <name>Send_NPS_Marketing_Notification</name>
        <label>Send NPS Marketing Notification</label>
        <locationX>182</locationX>
        <locationY>5399</locationY>
        <actionName>NPS__c.NPS_NPS_Survey_Complete_Marketing_Notification</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>UK_I_Business_Units</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.NPS_NPS_Survey_Complete_Marketing_Notification</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <description>Send UK&amp;I - NPS Marketing Notification</description>
        <name>Send_UK_I_NPS_Marketing_Notification</name>
        <label>Send UK&amp;I - NPS Marketing Notification</label>
        <locationX>50</locationX>
        <locationY>5615</locationY>
        <actionName>NPS__c.UK_I_NPS_Marketing_Notification</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>NPS__c.UK_I_NPS_Marketing_Notification</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Set_is_New_Variable</name>
        <label>Set is New Variable</label>
        <locationX>4789</locationX>
        <locationY>431</locationY>
        <assignmentItems>
            <assignToReference>v_isNew</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>f_isNew</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_or_Update</targetReference>
        </connector>
    </assignments>
    <decisions>
        <description>Is the Q10 Recommend Us Score equal to or below the Score Threshold and an Action Plan has not already been created? If it is then create an Action Plan. If threshold is met or AP already created then do nothing.</description>
        <name>Action_Plan_Required_Decision</name>
        <label>Action Plan Required?</label>
        <locationX>4943</locationX>
        <locationY>2339</locationY>
        <defaultConnector>
            <targetReference>Update_NPS_Contact_Account_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Create_Action_Plan</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.NPS_Action_Plan_Created__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Q10_Response.Score__c</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Q10_Response.Score_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_NPS_Action_Plan_Record_Type</targetReference>
            </connector>
            <label>Yes - Create Action Plan</label>
        </rules>
    </decisions>
    <decisions>
        <description>Account Owner Country (APAC &amp; ME)</description>
        <name>APAC_ME_Account_Owner_Country</name>
        <label>APAC &amp; ME Account Owner Country</label>
        <locationX>2294</locationX>
        <locationY>5399</locationY>
        <defaultConnectorLabel>Other Countries</defaultConnectorLabel>
        <rules>
            <name>Australia</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Australia</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Australia</targetReference>
            </connector>
            <label>Australia</label>
        </rules>
        <rules>
            <name>Cambodia</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cambodia</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Cambodia</label>
        </rules>
        <rules>
            <name>India</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>India</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_India</targetReference>
            </connector>
            <label>India</label>
        </rules>
        <rules>
            <name>Indonesia</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Indonesia</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Indonesia</targetReference>
            </connector>
            <label>Indonesia</label>
        </rules>
        <rules>
            <name>Malaysia</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Malaysia</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Malaysia</targetReference>
            </connector>
            <label>Malaysia</label>
        </rules>
        <rules>
            <name>New_Zealand</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New Zealand</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_New_Zealand</targetReference>
            </connector>
            <label>New Zealand</label>
        </rules>
        <rules>
            <name>Philippines</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Philippines</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Philippines</targetReference>
            </connector>
            <label>Philippines</label>
        </rules>
        <rules>
            <name>Saudi_Arabia</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Saudi Arabia</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Saudi_Arabia</targetReference>
            </connector>
            <label>Saudi Arabia</label>
        </rules>
        <rules>
            <name>Singapore</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Singapore</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Singapore</targetReference>
            </connector>
            <label>Singapore</label>
        </rules>
        <rules>
            <name>Thailand</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Thailand</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_Thailand</targetReference>
            </connector>
            <label>Thailand</label>
        </rules>
        <rules>
            <name>United_Arab_Emirates</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account__r.Owner_Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>United Arab Emirates</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_APAC_ME_NPS_Marketing_Notification_United_Arab_Emirates</targetReference>
            </connector>
            <label>United Arab Emirates</label>
        </rules>
    </decisions>
    <decisions>
        <description>APAC Regional Threshold Score =&gt; 120 or Promoter</description>
        <name>APAC_ME_Regional_Marketing_Threshold</name>
        <label>APAC&amp;ME - Regional Marketing Threshold</label>
        <locationX>3152</locationX>
        <locationY>5291</locationY>
        <defaultConnectorLabel>Threshold not met</defaultConnectorLabel>
        <rules>
            <name>APAC_ME_Regional_Threshold_met</name>
            <conditionLogic>1 OR 2</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_NPS_Score__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>120.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Survey_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Promoter</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>APAC_ME_Account_Owner_Country</targetReference>
            </connector>
            <label>APAC&amp;ME - Regional Threshold met</label>
        </rules>
    </decisions>
    <decisions>
        <name>Appointment_Scheduled</name>
        <label>Appointment Scheduled</label>
        <locationX>5427</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>Has_the_Appointment_DateTime_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Scheduled</defaultConnectorLabel>
        <rules>
            <name>Scheduled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Visit_Start__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Appointment Required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Visiting_Contact__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Visit_Finish__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Visit_Start__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Visit_Finish__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Status_Update_Scheduled</targetReference>
            </connector>
            <label>Scheduled</label>
        </rules>
    </decisions>
    <decisions>
        <name>Automation_Enabled_Decision</name>
        <label>Automation Enabled?</label>
        <locationX>5438</locationX>
        <locationY>323</locationY>
        <defaultConnectorLabel>Automation Disabled</defaultConnectorLabel>
        <rules>
            <name>Automation_Enabled_Outcome</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.OCS_Config_Settings_CSH__c.Flows_Disabled__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_is_New_Variable</targetReference>
            </connector>
            <label>Automation Enabled</label>
        </rules>
    </decisions>
    <decisions>
        <name>Corporate_Type</name>
        <label>Corporate Type</label>
        <locationX>4249</locationX>
        <locationY>4967</locationY>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Facilities</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Corporate_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Facilities</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Emails_Enabled_NPS_Closure_Notifications_Decision</targetReference>
            </connector>
            <label>Facilities</label>
        </rules>
        <rules>
            <name>Automotive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Corporate_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Automotive</stringValue>
                </rightValue>
            </conditions>
            <label>Automotive</label>
        </rules>
    </decisions>
    <decisions>
        <name>Create_or_Update</name>
        <label>Create or Update</label>
        <locationX>4789</locationX>
        <locationY>539</locationY>
        <defaultConnector>
            <targetReference>Appointment_Scheduled</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Update</defaultConnectorLabel>
        <rules>
            <name>Create</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>v_isNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account_with_Next_Visit</targetReference>
            </connector>
            <label>Create</label>
        </rules>
    </decisions>
    <decisions>
        <name>Emails_Enabled_NPS_Closure_Notifications_Decision</name>
        <label>Emails Enabled? (NPS Closure Notifications)</label>
        <locationX>3432</locationX>
        <locationY>5075</locationY>
        <defaultConnectorLabel>Emails Disabled - Stop</defaultConnectorLabel>
        <rules>
            <name>Emails_Enabled_NPS_Closure_Notifications_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.OCS_Config_Settings_CSH__c.Emails_Disabled__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Region</targetReference>
            </connector>
            <label>Emails Enabled - Continue</label>
        </rules>
    </decisions>
    <decisions>
        <name>Emails_Enabled_Scheduled_Notification</name>
        <label>Emails Enabled? (Scheduled Notification)</label>
        <locationX>4976</locationX>
        <locationY>971</locationY>
        <defaultConnector>
            <targetReference>Has_the_Appointment_DateTime_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Send_NPS_Survey_Scheduled_Notification_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.OCS_Config_Settings_CSH__c.Emails_Disabled__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NPS_Survey_is_Scheduled_Email</targetReference>
            </connector>
            <label>Yes - Send</label>
        </rules>
    </decisions>
    <decisions>
        <name>Emails_Enabled_Surveyor_Appointment_Changed_Notification</name>
        <label>Emails Enabled? (Surveyor Appointment Changed Notification)</label>
        <locationX>5108</locationX>
        <locationY>1655</locationY>
        <defaultConnector>
            <targetReference>NPS_Closed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Send_Surveyor_Appointment_Changed_Notification_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.OCS_Config_Settings_CSH__c.Emails_Disabled__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_NPS_Surveyor_Appointment_DateTime_Changed</targetReference>
            </connector>
            <label>Yes - Send</label>
        </rules>
    </decisions>
    <decisions>
        <name>Emails_Enabled_Surveyor_Changed_Notification_Decision</name>
        <label>Emails Enabled? (Surveyor Changed Notification)</label>
        <locationX>4591</locationX>
        <locationY>4067</locationY>
        <defaultConnector>
            <targetReference>NPS_Survey_Completed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Emails_Enabled_Surveyor_Changed_Notification_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.OCS_Config_Settings_CSH__c.Emails_Disabled__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Surveyor_Changed_Notification_Decision</targetReference>
            </connector>
            <label>Yes - Continue</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_the_Appointment_DateTime_Changed</name>
        <label>Has the Appointment Date/Time Changed</label>
        <locationX>5427</locationX>
        <locationY>1439</locationY>
        <defaultConnector>
            <targetReference>NPS_Closed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Due_Date_Changed</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Visit_Start__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Overdue</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Surveyor_Notification_Decision</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Visit_Start_in_Future</name>
        <label>Is Visit Start in Future?</label>
        <locationX>5130</locationX>
        <locationY>863</locationY>
        <defaultConnector>
            <targetReference>Has_the_Appointment_DateTime_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Visit_Future</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Visit_Start__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>$Flow.CurrentDateTime</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Visit_Finish__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>$Flow.CurrentDateTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Emails_Enabled_Scheduled_Notification</targetReference>
            </connector>
            <label>Yes - Visit Future</label>
        </rules>
    </decisions>
    <decisions>
        <description>Has the NPS been closed?</description>
        <name>NPS_Closed_Decision</name>
        <label>NPS Closed?</label>
        <locationX>5427</locationX>
        <locationY>2123</locationY>
        <defaultConnector>
            <targetReference>Update_NPS_Contact_Account_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Closed_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Q10_Response</targetReference>
            </connector>
            <label>Yes - Closed</label>
        </rules>
    </decisions>
    <decisions>
        <description>Has the NPS Survey just been completed? If so send Conga Outbound Message to auto generate NPS PDF and notify MD.</description>
        <name>NPS_Survey_Completed_Decision</name>
        <label>NPS Survey Completed?</label>
        <locationX>4789</locationX>
        <locationY>4643</locationY>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Generate_PDF</name>
            <conditionLogic>1 AND 2 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.No_of_Attachments__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.No_of_Attachments__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Conga_Trigger_NPS</targetReference>
            </connector>
            <label>Yes - Generate PDF</label>
        </rules>
    </decisions>
    <decisions>
        <description>Has the NPS Surveyor Changed (where a value already existed beforehand) and the record is not yet Closed.</description>
        <name>NPS_Surveyor_Changed_Decision</name>
        <label>NPS Surveyor Changed Decision</label>
        <locationX>4789</locationX>
        <locationY>3959</locationY>
        <defaultConnector>
            <targetReference>NPS_Survey_Completed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No - Skip</defaultConnectorLabel>
        <rules>
            <name>Yes_Changed</name>
            <conditionLogic>1 AND 5 AND (2 OR 3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.NPS_Surveyor__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Appointment Required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Overdue</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.NPS_Surveyor__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Emails_Enabled_Surveyor_Changed_Notification_Decision</targetReference>
            </connector>
            <label>Yes Changed</label>
        </rules>
    </decisions>
    <decisions>
        <description>NPS Owner Region</description>
        <name>Region</name>
        <label>Region</label>
        <locationX>2327</locationX>
        <locationY>5183</locationY>
        <defaultConnectorLabel>Non UKI or APACME</defaultConnectorLabel>
        <rules>
            <name>UK_IRE_Region</name>
            <conditionLogic>1</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner_Region__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>UK&amp;I</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UK_I_Regional_Marketing_Threshold</targetReference>
            </connector>
            <label>UK &amp; IRE</label>
        </rules>
        <rules>
            <name>APAC_ME_Region</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner_Region__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>APAC</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>APAC_ME_Regional_Marketing_Threshold</targetReference>
            </connector>
            <label>APAC &amp; ME</label>
        </rules>
    </decisions>
    <decisions>
        <description>If Owner is Active send notification to them.
If Owner Inactive and Owner&apos;s Manager Active then send notification to them.
Otherwise do NOT send notification.</description>
        <name>Surveyor_Changed_Notification_Decision</name>
        <label>Surveyor Changed Notification Decision</label>
        <locationX>4371</locationX>
        <locationY>4175</locationY>
        <defaultConnector>
            <targetReference>NPS_Survey_Completed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Recipients - Skip</defaultConnectorLabel>
        <rules>
            <name>Notify_Owner_SurveyorChanged_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner:User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_Owner_NPS_Surveyor_Changed</targetReference>
            </connector>
            <label>Notify Owner</label>
        </rules>
        <rules>
            <name>Notify_Owner_Manager_SurveyorChanged_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner:User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.NPS_Owner_Manager__r.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_Owner_Manager_NPS_Surveyor_Changed</targetReference>
            </connector>
            <label>Notify Owner Manager</label>
        </rules>
    </decisions>
    <decisions>
        <name>Surveyor_Notification_Decision</name>
        <label>Surveyor Notification Decision</label>
        <locationX>5262</locationX>
        <locationY>1547</locationY>
        <defaultConnector>
            <targetReference>NPS_Closed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Recipients - Skip</defaultConnectorLabel>
        <rules>
            <name>Notify_Surveyor_Rescheduled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.NPS_Surveyor__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.NPS_Surveyor__r.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Emails_Enabled_Surveyor_Appointment_Changed_Notification</targetReference>
            </connector>
            <label>Notify Surveyor</label>
        </rules>
    </decisions>
    <decisions>
        <description>Selected Business Units (UK&amp;I) for Marketing</description>
        <name>UK_I_Business_Units</name>
        <label>Selected UK &amp; IRE Business Units</label>
        <locationX>182</locationX>
        <locationY>5507</locationY>
        <defaultConnectorLabel>Other Business Units</defaultConnectorLabel>
        <rules>
            <name>Including_in_Selected_UKI_Business_Units</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account_Business_Unit__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Private FM</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Business_Unit__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Security</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Business_Unit__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ireland</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Business_Unit__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Catering</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_UK_I_NPS_Marketing_Notification</targetReference>
            </connector>
            <label>Including in Selected UKI Business Units</label>
        </rules>
    </decisions>
    <decisions>
        <description>UK&amp;I Regional Threshold Score =&gt; 120 or Promoter</description>
        <name>UK_I_Regional_Marketing_Threshold</name>
        <label>UK&amp;I - Regional Marketing Threshold</label>
        <locationX>380</locationX>
        <locationY>5291</locationY>
        <defaultConnectorLabel>Threshold not met</defaultConnectorLabel>
        <rules>
            <name>UK_I_Threshold_met</name>
            <conditionLogic>1 OR 2</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_NPS_Score__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>120.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Survey_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Promoter</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_NPS_Marketing_Notification</targetReference>
            </connector>
            <label>UK&amp;I - Threshold met</label>
        </rules>
    </decisions>
    <decisions>
        <description>Does the Visiting Contact on the NPS record match the NPS Client Contact on Account? If it does NOT match and the record is Pending Appointment/Scheduled/Overdue (not Closed) then update the Client Contact on Account. Only Action for Account NPS.</description>
        <name>Update_NPS_Contact_Account_Decision</name>
        <label>Update NPS Contact (Account) Decision</label>
        <locationX>4789</locationX>
        <locationY>3071</locationY>
        <defaultConnector>
            <targetReference>Update_Owner_Email_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Skip</defaultConnectorLabel>
        <rules>
            <name>Update_Account_Contact</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Visiting_Contact__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Account__r.NPS_Client_Contact__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Account</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account_NPS_Contact</targetReference>
            </connector>
            <label>Update Account Contact</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_Owner_Email_Decision</name>
        <label>Update Owner Email Decision</label>
        <locationX>4789</locationX>
        <locationY>3419</locationY>
        <defaultConnector>
            <targetReference>NPS_Surveyor_Changed_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Skip</defaultConnectorLabel>
        <rules>
            <name>Update_Owner_Email_Outcome</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.NPS_Owner_Email__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Owner:User.Email</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_NPS_Owner_Email</targetReference>
            </connector>
            <label>Update Owner Email</label>
        </rules>
    </decisions>
    <description>Incorporate Regional and Business Unit Notifications</description>
    <environments>Default</environments>
    <formulas>
        <name>DueDatePlus1</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Due_Date__c} + 1</expression>
    </formulas>
    <formulas>
        <name>DueDatePlus2</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Due_Date__c} + 2</expression>
    </formulas>
    <formulas>
        <name>DueDatePlus4</name>
        <dataType>Date</dataType>
        <expression>{!$Record.Due_Date__c} + 4</expression>
    </formulas>
    <formulas>
        <name>f_isNew</name>
        <dataType>Boolean</dataType>
        <expression>IF({!$Setup.OCS_Config_Settings_CSH__c.Migration_Flows_Enabled__c}, {!$Setup.OCS_Config_Settings_CSH__c.Migration_Flows_Enabled__c}, ISNEW())</expression>
    </formulas>
    <formulas>
        <name>TodayPlus7</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 7</expression>
    </formulas>
    <interviewLabel>NPS: After Create and Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>NPS: After Create and Update</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_NPS_Action_Plan</name>
        <label>Create NPS Action Plan</label>
        <locationX>4415</locationX>
        <locationY>2555</locationY>
        <connector>
            <targetReference>Update_NPS_Record_AP_Created</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Assignedto__c</field>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NPS__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_NPS_Action_Plan_Record_Type.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </inputAssignments>
        <object>Action_Plan__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_NPS_Action_Plan_Record_Type</name>
        <label>Get NPS Action Plan Record Type</label>
        <locationX>4415</locationX>
        <locationY>2447</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_NPS_Action_Plan</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Action_Plan__c</stringValue>
            </value>
        </filters>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>NPS</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get Response for Q10 Recommend Us</description>
        <name>Get_Q10_Response</name>
        <label>Get Recommend Us Response</label>
        <locationX>4943</locationX>
        <locationY>2231</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Action_Plan_Required_Decision</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>NPS__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Q10 - Would you recommend us?</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NPS_Response__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <description>Set System: Conga Merge In Progress field to TRUE to show Lightning Message Component to User.</description>
        <name>Set_System_Conga_Merge_In_Progress_Field</name>
        <label>Set System Conga Merge In Progress Field</label>
        <locationX>4249</locationX>
        <locationY>4859</locationY>
        <connector>
            <targetReference>Corporate_Type</targetReference>
        </connector>
        <inputAssignments>
            <field>System_Conga_Merge_In_Progress__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Status_Update_Scheduled</name>
        <label>Status Update = Scheduled</label>
        <locationX>5130</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>Is_Visit_Start_in_Future</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Scheduled</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Update Visiting Contact on Account.</description>
        <name>Update_Account_NPS_Contact</name>
        <label>Update Account NPS Contact</label>
        <locationX>4525</locationX>
        <locationY>3179</locationY>
        <connector>
            <targetReference>Update_Owner_Email_Decision</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>NPS_Client_Contact__c</field>
            <value>
                <elementReference>$Record.Visiting_Contact__c</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Account_with_Next_Visit</name>
        <label>Update Account with Next Visit</label>
        <locationX>4151</locationX>
        <locationY>647</locationY>
        <connector>
            <targetReference>Update_NPS_Contact_Account_Decision</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account__r.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Next_NPS_Visit__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_NPS_Owner_Email</name>
        <label>Update NPS Owner Email</label>
        <locationX>4525</locationX>
        <locationY>3527</locationY>
        <connector>
            <targetReference>NPS_Surveyor_Changed_Decision</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>NPS_Owner_Email__c</field>
            <value>
                <elementReference>$Record.Owner:User.Email</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_NPS_Record_AP_Created</name>
        <label>Update NPS Record - AP Created</label>
        <locationX>4415</locationX>
        <locationY>2663</locationY>
        <connector>
            <targetReference>Update_NPS_Contact_Account_Decision</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Log_Error</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>NPS_Action_Plan_Created__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NPS_Action_Plan__c</field>
            <value>
                <elementReference>Create_NPS_Action_Plan</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>5312</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Automation_Enabled_Decision</targetReference>
        </connector>
        <object>NPS__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>Log_Error</name>
        <label>Log Error</label>
        <locationX>4789</locationX>
        <locationY>3635</locationY>
        <flowName>Utility_Error_Log_Creation</flowName>
        <inputAssignments>
            <name>Level</name>
            <value>
                <stringValue>Error</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Messages</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>OriginName</name>
            <value>
                <stringValue>NPS: After Create and Update</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Type</name>
            <value>
                <stringValue>Flow</stringValue>
            </value>
        </inputAssignments>
    </subflows>
    <variables>
        <name>v_isNew</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
